(this["webpackJsonpreact-django"]=this["webpackJsonpreact-django"]||[]).push([[0],{28:function(e,t,a){e.exports=a(40)},33:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(11),s=a.n(l);a(33),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=a(10),o=a(3);function i(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var r=a[n].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}function m(e,t,a,n){var r;n&&(r=JSON.stringify(n));var l=new XMLHttpRequest,s="http://127.0.0.1:8000/api".concat(t);l.responseType="json";var c=i("csrftoken");l.open(e,s),l.setRequestHeader("Content-Type","application/json"),c&&(l.setRequestHeader("HTTP_X_REQUESTED_WITH","XMLHttpRequest"),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.setRequestHeader("X-CSRFToken",c)),l.onload=function(){403===l.status&&(window.location.href="login/?showLoginRequired=true"),a(l.response,l.status)},l.onerror=function(e){a({message:"An error Occurred"},400)},l.send(r)}function u(e,t){var a="/posts/";null!==t&&void 0!==t&&(a=t.replace("http://127.0.0.1:8000/api","")),m("GET",a,e)}function f(e,t,a){"GET"===e?m("GET","/myprofile/settings/",t):"POST"===e&&m("POST","/myprofile/settings/",t,a)}function d(e){m("GET","/notification-count/",e)}function p(e){var t=e.post,a=e.didPerformLike,n=(t.likes&&t.likes,function(e,t){console.log(e,t),200!==t&&201!==t||!a||a(e,t)}),l=function(e){var a;e.preventDefault(),a=t.id,m("POST","/posts/like/",n,{id:a})};return!0===t.is_liked?r.a.createElement("a",{className:"like",onClick:l},r.a.createElement("i",{style:{color:"#007bff"},className:"fa fa-thumbs-o-up black"})):r.a.createElement("a",{className:"like",onClick:l},r.a.createElement("i",{className:"fa fa-thumbs-o-up black"}))}function E(e){var t=e.post,a=(e.didPerformLike,t.likes?t.likes:0);return r.a.createElement("span",{style:{paddingTop:"5px",paddingBottom:"3px"},className:"blue-background"},a," people liked this post")}function g(e){var t=e.post,a=Object(n.useState)(e.post?e.post:null),l=Object(o.a)(a,2),s=l[0],c=l[1],i=function(e,t){200===t&&c(e)},m="/profile/".concat(t.author.username),u="/post/".concat(t.id),f=new Date(t.date_posted);return r.a.createElement("li",null,r.a.createElement("div",{className:"media content-section mt-3"},r.a.createElement("a",{href:m},r.a.createElement("img",{className:"rounded-circle article-img",src:"http://127.0.0.1:8000".concat(t.image)})),r.a.createElement("div",{className:"media-body"},r.a.createElement("div",{className:"article-metadata"},r.a.createElement("a",{className:"mr-2",href:m}," ",t.author.username," "),r.a.createElement("small",{className:"text-muted"},f.toDateString()," ",f.getHours(),":",f.getMinutes()," ")),r.a.createElement("h2",null,r.a.createElement("a",{className:"article-title",href:u}," ",t.title," ")),r.a.createElement("p",{className:"article-content"}," ",t.content," "),r.a.createElement("hr",null),r.a.createElement(p,{post:s,didPerformLike:i}),r.a.createElement("a",{className:"like"},r.a.createElement("i",{style:{marginBottom:"10px"},className:"fa fa-twitter black"})),r.a.createElement(E,{post:s,didPerformLike:i}))))}function N(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],s=a[1],i=Object(n.useState)([]),m=Object(o.a)(i,2),f=m[0],d=m[1],p=Object(n.useState)(null),E=Object(o.a)(p,2),N=E[0],b=E[1],h=Object(n.useState)(!1),y=Object(o.a)(h,2),v=y[0],x=y[1];Object(n.useEffect)((function(){var t=Object(c.a)(e.newPosts).concat(l);t.length!==f.length&&d(t)}),[e.newPosts,f,l]),Object(n.useEffect)((function(){if(!1===v){u((function(e,t){200===t?(b(e.next),s(e.results),x(!0)):alert("There was an error")}))}}),[l,v,x,e.username]);return console.log(f),r.a.createElement(r.a.Fragment,null,f.map((function(e,t){return r.a.createElement(g,{post:e,key:t})})),null!==N&&r.a.createElement("button",{onClick:function(e){if(e.preventDefault(),null!==N){u((function(e,t){if(200===t){b(e.next),console.log("Next",e.next);var a=Object(c.a)(f).concat(e.results);s(a),d(a)}else alert("There was an error")}),N)}},className:"btn btn-outline-primary"},"Load next"))}function b(e){var t=e.currentState,a=e.profileId,n=e.didPerformFollow,l=function(e,t){201!==t&&200!==t||!n||n(e,t)},s=function(e){e.preventDefault(),function(e,t){m("POST","/profile-follow/",t,{receiver_id:e})}(a,l)};return"sent"===t?r.a.createElement("span",{style:{cursor:"pointer"},onClick:s,className:"following-button ml-3"},"Follow request sent"):"not_sent"===t?r.a.createElement("span",{style:{cursor:"pointer"},onClick:s,className:"follow-button ml-3"},"Follow"):"following"===t?r.a.createElement("span",{style:{cursor:"pointer"},onClick:s,className:"following-button ml-3"},"Following"):"is_owner"===t?r.a.createElement("a",{href:"/my-profile/settings/",style:{cursor:"pointer"},className:"following-button ml-3"},"Settings"):void 0}function h(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],s=a[1],i=function(e,t){200!==t&&201!==t||(s([e]),console.log("setProfileItSelf"))};return Object(n.useEffect)((function(){var t,a;t=function(t,a){if(200===a){var n=Object(c.a)(e.profile).concat(t);s(n)}},a="".concat(e.username,"/"),m("GET","/profile/".concat(a),t)}),[e.profile]),r.a.createElement(r.a.Fragment,null,l.map((function(e,t){return r.a.createElement("div",{key:t,className:"content-section"},r.a.createElement("div",{className:"media"},r.a.createElement("img",{className:"rounded-circle account-img",src:e.image}),r.a.createElement("div",{className:"media-body"},r.a.createElement("h2",{className:"account-heading"},e.user.username," ",r.a.createElement(b,{currentState:e.follow_status,didPerformFollow:i,profileId:e.user.id})," "),r.a.createElement("span",null,r.a.createElement("a",{style:{display:"inline"},className:"article-title",href:"#"},r.a.createElement("strong",null,e.user.followers_count)," followers"),r.a.createElement("span",{style:{opacity:"0%"}},"..."),r.a.createElement("a",{style:{display:"inline"},className:"article-title",href:"#"},r.a.createElement("strong",null,e.user.following_count)," following"),r.a.createElement("p",{className:"text-secondary"},e.user.first_name," ",e.user.last_name)))))})))}var y=a(61),v=a(62);function x(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],s=a[1],m=r.a.createRef(),u=r.a.createRef(),d=r.a.createRef(),p=r.a.createRef(),E=r.a.createRef(),g=r.a.createRef(),N=r.a.useRef(null),b=Object(n.useState)(!0),h=Object(o.a)(b,2),x=h[0],k=h[1],w=Object(n.useState)(!1),O=Object(o.a)(w,2),j=O[0],P=O[1],S=Object(n.useState)(null),T=Object(o.a)(S,2),D=T[0],_=T[1],F=Object(n.useState)(),R=Object(o.a)(F,2),C=R[0],L=R[1],q=new FormData,I=function(t){t.preventDefault();var a=function(t,a){if(200===a){var n=Object(c.a)(e.profile).concat(t);s(n)}};null!==C&&void 0!==C&&q.append("image",C);var n=i("csrftoken");q.append("username",m.current.value),q.append("biography",u.current.value),q.append("first_name",d.current.value),q.append("last_name",p.current.value),q.append("email_address",E.current.value),q.append("isprivate",D),console.log(C),fetch("http://127.0.0.1:8000/api/myprofile/settings/",{method:"POST",headers:{"X-CSRFToken":n},body:q}).then((function(){f("GET",a),N.current.click()})).catch((function(e){return console.log(e)}))};Object(n.useEffect)((function(){f("GET",(function(t,a){var n=Object(c.a)(e.profile).concat(t);s(n)}))}),[]);var M=function(e){k(e.target.checked),P(e.target.checked),_(e.target.checked),console.log(e.target.checked)},B=function(e){P(e.target.checked),k(e.target.checked),_(e.target.checked),console.log(e.target.checked)};return console.log(l),r.a.createElement(r.a.Fragment,null,l.map((function(e,t){return r.a.createElement("div",{key:t,className:"content-section"},r.a.createElement("div",{className:"media"},r.a.createElement("img",{className:"rounded-circle account-img",src:e.image}),r.a.createElement("div",{className:"media-body"},r.a.createElement("h2",{className:"account-heading article-title"},e.user.username),r.a.createElement("span",null,r.a.createElement("a",{href:"#",style:{display:"inline"},className:"article-title"},r.a.createElement("strong",null,e.user.followers_count)," Followers"),r.a.createElement("span",{style:{opacity:"0"}},"..."),r.a.createElement("a",{href:"#",style:{display:"inline"},className:"article-title"},r.a.createElement("strong",null,e.user.following_count)," Following"),r.a.createElement("p",{className:"text-secondary"},e.user.first_name," ",e.user.last_name)))),r.a.createElement("form",{method:"POST",encType:"multipart/form-data"},r.a.createElement("fieldset",{className:"form-group"},r.a.createElement("legend",{className:"border-bottom mb-4"},"Profile Info"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"requiredField"},"Username"),r.a.createElement("span",{className:"asteriskField"},"*"),r.a.createElement("input",{ref:m,type:"text",defaultValue:e.user.username,maxLength:"20",className:"textinput textInput form-control"}),r.a.createElement("small",{className:"form-text text-muted"},"Required. 20 characters or fewer. Letters, digits and @/./+/-/_ only."),r.a.createElement("small",{className:"form-text text-muted"},"You can change your username only twice every 14 days.")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"requiredField"},"Biography"),r.a.createElement("textarea",{ref:u,type:"text",defaultValue:e.biography,maxLength:"150",className:"textinput textInput form-control"}),r.a.createElement("small",{className:"form-text text-muted"},"Not Required. 150 characters or fewer.")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"requiredField"},"First Name"),r.a.createElement("input",{ref:d,type:"text",defaultValue:e.user.first_name,maxLength:"20",className:"textinput textInput form-control"}),r.a.createElement("small",{className:"form-text text-muted"},"Not required. 20 characters or fewer. Letters only.")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"requiredField"},"Last Name"),r.a.createElement("input",{ref:p,type:"text",defaultValue:e.user.last_name,maxLength:"20",className:"textinput textInput form-control"}),r.a.createElement("small",{className:"form-text text-muted"},"Not required. 20 characters or fewer. Letters only.")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"requiredField"},"Email",r.a.createElement("span",{className:"asteriskField"},"*")),r.a.createElement("input",{ref:E,type:"email",defaultValue:e.user.email_address,className:"emailinput form-control"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{ref:g,onChange:function(e){return L(e.target.files[0])},type:"file"})),e.isPrivate?r.a.createElement(v.a,{control:r.a.createElement(y.a,{id:"switch",checked:x,onChange:M,name:"checkedPrivate"}),label:"Private"}):r.a.createElement(v.a,{control:r.a.createElement(y.a,{id:"switch",checked:j,onChange:B,name:"checkedPrivate"}),label:"Private"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-outline-success",onClick:I},"Update"),r.a.createElement("a",{ref:N,href:"#myModal","data-toggle":"modal",className:"d-none"}))))})))}function k(e){return r.a.createElement("form",{id:"search_bar_form",style:{textAlign:"right"},className:"blue-background-search"},r.a.createElement("a",{type:"button","data-toggle":"modal","data-target":"#exampleModal",className:"fa fa-plus-circle plus-hover"}),r.a.createElement("a",{type:"button",style:{marginLeft:"15px"},className:"fa fa-search search_icon"}),r.a.createElement("input",{id:"search_bar_input",className:"search-bar",type:"search",placeholder:" Search...","aria-label":"Search"}))}function w(e){var t=e.didPost,a=new Date,l=r.a.createRef(),s=r.a.createRef(),c=Object(n.useState)(null),i=Object(o.a)(c,2),u=i[0],f=i[1],d=Object(n.useState)(null),p=Object(o.a)(d,2),E=p[0],g=p[1],N=Object(n.useState)(null),b=Object(o.a)(N,2),h=b[0],y=b[1],v=function(e,a){201===a?(t(e),y("success"),g("Post created successfully!"),f("alert alert-success")):400===a&&(y("error"),g("The form is wrong. Please make sure there is no camps empty."),f("alert alert-danger"))};return r.a.createElement(r.a.Fragment,null," ",h&&r.a.createElement(O,{alertType:h,alertMessage:E,alertClassName:u}),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t,a={title:l.current.value,content:s.current.value};m("POST","/posts/create/",v,{title:(t=a).title,content:t.content}),""!==l.current.value&&""!==s.current.value&&(l.current.value=null,s.current.value=null)},className:"media content-section mt-3"},r.a.createElement("a",{href:"#"},r.a.createElement("img",{className:"rounded-circle article-img",src:"http://127.0.0.1:8000".concat(e.imageurl)})),r.a.createElement("div",{className:"media-body"},r.a.createElement("div",{className:"article-metadata"},r.a.createElement("a",{className:"mr-2",href:"http://127.0.0.1:8000/profile/".concat(e.username)},e.username),r.a.createElement("small",{className:"text-muted"},a.toDateString()," ",a.getHours(),":",a.getMinutes())),r.a.createElement("h2",null,r.a.createElement("input",{ref:l,style:{fontSize:"30px",height:"39px",color:"#444444",fontWeight:600},className:"form-control",type:"text"})),r.a.createElement("textarea",{ref:s,style:{height:"89px"},className:"form-control"}),r.a.createElement("hr",null),r.a.createElement("a",{className:"like"},r.a.createElement("i",{style:{marginBottom:"15px"},className:"fa fa-thumbs-o-up black"})),r.a.createElement("a",{className:"like"},r.a.createElement("i",{className:"fa fa-twitter black"})),r.a.createElement("span",{style:{paddingTop:"5px",paddingBottom:"3px"},className:"blue-background"},"X people liked this post"),r.a.createElement("button",{type:"submit",style:{paddingTop:"3px",paddingBottom:"3px",float:"right",cursor:"pointer",marginTop:"5px",color:"white"},className:"btn btn-primary"},"Post"))))}function O(e){e.alertType;var t=e.alertMessage,a=e.alertClassName;return r.a.createElement("div",{className:a,style:{marginTop:"15px"},role:"alert"},t)}var j=a(60),P=a(21),S=a.n(P);function T(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],s=a[1];return setInterval((function(){d((function(e,t){200===t&&(console.log(e.notifications),s(e.notifications))}))}),1e4),Object(n.useEffect)((function(){d((function(e,t){200===t&&(console.log(e.notifications),s(e.notifications))}))}),[]),!0===e.isowner||"True"===e.isowner?r.a.createElement("div",{className:"content-section"},r.a.createElement("h3",null,"My Sidebar"),r.a.createElement("p",{className:"text-muted"},"You can put any information here you'd like."),r.a.createElement("ul",{className:"list-group"},r.a.createElement("a",{href:"/profile/".concat(e.username),style:{textDecoration:"None"},className:"list-group-item sidebar-selected"},"View Profile"),r.a.createElement("a",{href:"/my-profile/settings/",style:{textDecoration:"None"},className:"list-group-item sidebar-item"},"Edit Profile"),r.a.createElement("a",{href:"/",style:{textDecoration:"None"},className:"list-group-item sidebar-item"},"Change Password")),r.a.createElement("br",null)):!1===e.isowner||"False"===e.isowner?r.a.createElement("div",{className:"content-section"},r.a.createElement("h3",null,"My Sidebar"),r.a.createElement("p",{className:"text-muted"},"You can put any information here you'd like."),r.a.createElement("ul",{className:"list-group"},r.a.createElement("a",{href:"/my-profile/settings/",style:{textDecoration:"None"},className:"list-group-item sidebar-item"},"Profile setttings"),r.a.createElement("a",{href:"/",style:{textDecoration:"None"},className:"list-group-item sidebar-item"},"Latest Posts"),r.a.createElement("a",{href:"/notifications",style:{textDecoration:"None"},className:"list-group-item sidebar-item"},"Notifications",r.a.createElement("span",{className:"ml-2"},r.a.createElement(j.a,{badgeContent:l.toString(),color:"secondary"},r.a.createElement(S.a,{style:{color:"black"}})))),r.a.createElement("a",{href:"/messages",style:{textDecoration:"None"},className:"list-group-item sidebar-item"},"Messages")),r.a.createElement("br",null)):"profile-settings"===e.view?r.a.createElement("div",{className:"content-section"},r.a.createElement("h3",null,"My Sidebar"),r.a.createElement("p",{className:"text-muted"},"You can put any information here you'd like."),r.a.createElement("ul",{className:"list-group"},"viewmyprofile"==e.selected?r.a.createElement("a",{href:"/profile/".concat(e.username),style:{textDecoration:"None"},className:"list-group-item sidebar-selected"},"View Profile"):r.a.createElement("a",{href:"/profile/".concat(e.username),style:{textDecoration:"None"},className:"list-group-item sidebar-item"},"View Profile"),"editprofile"==e.selected?r.a.createElement("a",{href:"/my-profile/settings/",style:{textDecoration:"None"},className:"list-group-item sidebar-selected"},"Edit Profile"):r.a.createElement("a",{href:"/my-profile/settings/",style:{textDecoration:"None"},className:"list-group-item sidebar-item"},"Edit Profile"),"changePassword"==e.selected?r.a.createElement("a",{href:"/",style:{textDecoration:"None"},className:"list-group-item sidebar-selected"},"Change Password"):r.a.createElement("a",{href:"/",style:{textDecoration:"None"},className:"list-group-item sidebar-item"},"Change Password")),r.a.createElement("br",null)):"home"===e.view?r.a.createElement("div",{className:"content-section"},r.a.createElement("h3",null,"My Sidebar"),r.a.createElement("p",{className:"text-muted"},"You can put any information here you'd like."),r.a.createElement("ul",{className:"list-group"},"profile"==e.selected?r.a.createElement("a",{href:"/my-profile/settings/",style:{textDecoration:"None"},className:"list-group-item sidebar-selected"},"Profile setttings"):r.a.createElement("a",{href:"/my-profile/settings/",style:{textDecoration:"None"},className:"list-group-item sidebar-item"},"Profile setttings"),"latestPosts"==e.selected?r.a.createElement("a",{href:"/",style:{textDecoration:"None"},className:"list-group-item sidebar-selected"},"Latest Posts"):r.a.createElement("a",{href:"/",style:{textDecoration:"None"},className:"list-group-item sidebar-item"},"Latest Posts"),"notifications"==e.selected?r.a.createElement("a",{href:"/notifications",style:{textDecoration:"None"},className:"list-group-item sidebar-selected"},"Notifications"):r.a.createElement("a",{href:"/notifications",style:{textDecoration:"None"},className:"list-group-item sidebar-item"},"Notifications",r.a.createElement("span",{className:"ml-2"},r.a.createElement(j.a,{badgeContent:l.toString(),color:"secondary"},r.a.createElement(S.a,{style:{color:"black"}})))),"messages"==e.selected?r.a.createElement("a",{href:"/messages",style:{textDecoration:"None"},className:"list-group-item sidebar-selected"},"Messages"):r.a.createElement("a",{href:"/messages",style:{textDecoration:"None"},className:"list-group-item sidebar-item"},"Messages")),r.a.createElement("br",null)):void 0}var D=r.a.createElement,_=document.getElementById("posts-react"),F=document.getElementById("profile-react"),R=document.getElementById("sidebar-react");[[_,function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0],s=a[1];return r.a.createElement(r.a.Fragment,null,e.username&&r.a.createElement(w,Object.assign({didPost:function(e){var t=Object(c.a)(l);t.unshift(e),s(t)}},e)),r.a.createElement("div",{className:e.className},r.a.createElement(N,Object.assign({newPosts:l},e))))}],[F,function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0];return a[1],r.a.createElement(h,Object.assign({profile:l},e))}],[document.getElementById("search-nav-bar-react"),function(e){return r.a.createElement(k,null)}],[R,function(e){return r.a.createElement(T,e)}],[document.getElementById("profile-settings-react"),function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),l=a[0];return a[1],r.a.createElement(x,Object.assign({profile:l},e))}]].map((function(e){console.log(e[0]),e[0]&&s.a.render(D(e[1],e[0].dataset),e[0])})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.83c4d96e.chunk.js.map